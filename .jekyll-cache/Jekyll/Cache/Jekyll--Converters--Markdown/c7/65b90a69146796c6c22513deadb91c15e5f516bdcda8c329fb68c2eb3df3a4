I"P<p>Yesterday, I stumbled across <a href="https://www.reddit.com/r/DynastyFF/comments/am6rc2/a_big_fat_unwieldy_table_of_2018_rb_stats_that_i/">a Reddit post </a> in which u/Sow_Crates compiled some interesting statistics (fantasy points, targets, receptions, carries, TDs, touches, and opportunities) for a small sample of RBs. While the data on the surface was interesting (e.g. despite Christian McCaffrey‚Äôs notoriously high snap share, Ezekiel Elliott had a higher number of opportunities per game), I was piqued by the comments Sow_Crates made about the difficulty of the data collection process:</p>

<blockquote>
  <p>‚ÄúI‚Äôll probably do it when I‚Äôm done hating how I didn‚Äôt have a quicker way of getting the stats I wanted‚Äù ‚Ä¶ ‚Äúplugging the numbers in sapped any optimism I had of actually saying anything about them‚Äù</p>
</blockquote>

<p>I thought to myself that I would take a stab at compiling the data‚Ä¶and thirteen minutes later, I‚Äôd made a data set compiling 2018 week-by-week RB rushing and receiving stats!</p>

<p><img src="/assets/images/sowcrates1.png" alt="data set" /></p>

<p>No, I didn‚Äôt time myself (I just checked the timestamps between my Reddit comments) - but it did make me realize that my facility with finding and compiling NFL data isn‚Äôt common to everyone. Free data is much easier to get to these days, so let‚Äôs dive in to a) the way I approached it and b) an easier way to find the data.</p>

<h2 id="a-combining-nflscrapr-data-play-by-play-data-with-the-dynastyprocesscom-database">A) Combining nflscrapR-data play-by-play data with the DynastyProcess.com database</h2>

<p>The gold standard of free NFL data sources is the <a href="http://www.nfl.com/liveupdate/game-center/2012010101/2012010101_gtd.json">JSON data feed</a> that powers the <a href="https://www.nfl.com/gamecenter/2019020300/2018/POST22/patriots@rams?icampaign=scoreStrip-globalNav-2019020300">NFL.com GameCenter feed you‚Äôre probably familiar with</a>. I like to reference Ron Yurko‚Äôs <a href="https://github.com/ryurko/nflscrapR-data">nflscrapR.csv play-by-play data files</a>, which is essentially a cleaned up CSV version of that data. (Sidenote while I‚Äôm discussing this - the <a href="https://github.com/maksimhorowitz/nflscrapR">actual nflscrapR R package</a> lets you access the data live/real-time, but that‚Äôs usually overkill for my purposes + I don‚Äôt have a background in R programming. I‚Äôll happily just pull from the CSV‚Äôs).</p>

<p>These CSVs give you access to ~ 45000 plays and 100 columns of data for the NFL regular season. This would be incredibly daunting if you were to use Excel formulas to do your analysis - but I have better tools at my disposal like PowerQuery, so I shall wander in with no fear! Here‚Äôs a video for you to follow along with:</p>

<div style="width:100%;height:0px;position:relative;padding-bottom:56.327%;"><iframe src="https://streamja.com/embed/EmAb" frameborder="0" width="100%" height="100%" allowfullscreen="" style="width:100%;height:100%;position:absolute;"></iframe></div>

<ol>
  <li>
    <p>Once I‚Äôve loaded the data into the program, the first order of business is to drill down to just the few columns and rows that we need to access. For the purpose of compiling weekly RB stats, I want the following columns:</p>

    <blockquote>
      <p>possession team, game date, description, play_type, yards_gained, rush_attempt, pass_attempt, pass_TD, rush_TD, completed_pass, receiver_ID, rusher_ID</p>
    </blockquote>
  </li>
  <li>
    <p>Then, we‚Äôre going to drill down to the play-types I‚Äôm interested in (passes and runs), and then combine the receiverID and rusherID fields so that they are one column. We‚Äôll also calculate rushing yards and receiving yards here as rush_attempt x yards_gained and pass_attempt x yards_gained</p>
  </li>
  <li>
    <p>We‚Äôll then use the Group By function to combine all the data for each player_id each week - creating weekly totals for carries, rushing yards, rushing touchdowns, targets, receptions, and receiving touchdowns. We can also add a calculation for touches (carries+receptions) and opportunities (carries + targets). Finally, we‚Äôll also add a calculation for week numbers so that we‚Äôre not looking at actual date-dates. I do this by subtracting the date from September 6, 2018 (the kickoff date), dividing by 7 days/week, rounding down to the nearest whole number, and adding 1.</p>
  </li>
  <li>
    <p>At this point we‚Äôve got weekly stats for a bunch of playerIDs - it‚Äôd be a lot more helpful to have names and positions attached to these, wouldn‚Äôt it? There isn‚Äôt a handy way to assign names and positions from within this file, but the <a href="/downloads">DynastyProcess.com Database</a> has the nflGSIS IDs for the vast majority of players with statistics - so let‚Äôs take a minute to set up a query to that database so we can merge in the IDs.</p>
  </li>
  <li>
    <p>Once we‚Äôve got the merge set up, we can then filter for just running backs‚Ä¶and that‚Äôll get us to where I stopped previously. To finish off the rest of the calculations to get to where Sow_Crates finished off, we can use Group-By to combine the weekly data into season-long data, and then run a few calculations to get fantasy points and efficiency stats.</p>
  </li>
</ol>

<h2 id="b-or-you-could-use-ffstatisticscom-to-get-access-to-very-similar-data">B) Or, you could use FFStatistics.com to get access to very similar data!</h2>

<p>I realized after this that you could probably get to very similar efficiency calculations simply by accessing the FFStatistics database and using a few filters.</p>

<ol>
  <li>
    <p><a href="https://www.ffstatistics.com/tools-and-data/">https://www.ffstatistics.com/tools-and-data/</a></p>
  </li>
  <li>
    <p>FFStatistics Database (hover) -&gt; Running Back. Select Columns:</p>

    <blockquote>
      <p>Year, Player, Games, Team, RushAtt, RushYards, RushTDs, Targets, Receptions, RecYards, RecTDs, PointsPerTarget, etc</p>
    </blockquote>
  </li>
  <li>
    <p>and sort/filter to your heart‚Äôs content!</p>
  </li>
</ol>

<p>(There used to be a ‚Äúdownload data‚Äù option but I‚Äôm wondering if that‚Äôs been removed‚Ä¶ :thinking:)</p>

<h2 id="conclusion">Conclusion</h2>

<p>At the end of the day, NFL data is much more available than it used to be - so all we need to do is find out how to get at it! PowerQuery is my favourite language/program to use, but there are certainly other ways (R, Python, or even just web-based access like FFStatistics). I‚Äôm not quite sure why I leapt to play-by-play data this time (it may be because I was just modifying the code that <a href="https://twitter.com/_TanHo/status/1088520821109338114?s=20">generated this tweet</a>) - hindsight me says that ffstatistics would have been much easier.</p>

<p>Hope you enjoyed my inaugural blog post and I‚Äôm happy to answer any questions on Twitter <a href="https://www.twitter.com/_TanHo">@_TanHo</a>.</p>
:ET